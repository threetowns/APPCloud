<!DOCTYPE HTML>
<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="maximum-scale=1.0, minimum-scale=1.0, user-scalable=0, initial-scale=1.0, width=device-width"/>
    <meta name="format-detection" content="telephone=no, email=no, date=no, address=no">
    <title>Hello APP</title>
    <link rel="stylesheet" type="text/css" href="../css/api.css" />
    <link rel="stylesheet" type="text/css" href="../css/common.css" />
    <script>
      document.getElementsByTagName('html')[0].style.fontSize = (document.documentElement.clientWidth < 640) ? (document.documentElement.clientWidth / 6.40 + "px") : "100px";
    </script>
</head>
<body>
  <div id="main"></div>
  <div id="footer" class="footer_nav">
    <div class="items cur" tapmode="cur" onclick="changefooterTab(0)"><i class="icon-resource"></i><span>资源库</span></div>
    <div class="items" tapmode="cur" onclick="changefooterTab(1)"><i class="icon-release"></i><span>发布</span></div>
    <div class="items" tapmode="cur" onclick="changefooterTab(2)"><i class="icon-usercenter"></i><span>个人中心</span></div>
  </div>
</body>

<script type="text/javascript" src="../script/api.js"></script>
<script type="text/javascript">
  apiready = function(){
  	changefooterTab(0)
  };

  var footer = $api.byId('footer')
  	 ,footerTab = $api.domAll(footer, '.items')
  	 ,footerHeight = $api.offset(footer).h;

  // config frame name
  var frameNames = ['resource_frame', 'release_frame', 'usercenter_frame'];


  function changefooterTab(index) {
    for (var i = 0; i < footerTab.length; i++) {
      if (index == i) {
        $api.addCls(footerTab[i], 'cur');
        openFrame(i, true)
      } else {
        $api.removeCls(footerTab[i], 'cur');
        openFrame(i, false)
      }
    }
  }

function openFrame(index, isOpen) {
  if (isOpen) {
    api.openFrame({
      name: frameNames[index],
      url: './' + frameNames[index] + '.html',
      bounces: false,
      rect: {
        x: 0,
        y: 0,
        w: 'auto',
        h: api.winHeight - footerHeight
      },
      vScrollBarEnabled:false
    });
  } else {
    api.setFrameAttr({
      name: frameNames[index],
      hidden: true
    });
  }
};

</script>
</html>